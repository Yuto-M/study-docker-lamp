version: "3"

services:
    web:
        build:
            context: ./docker
        ports:
            - "25:25"
            - "80:80"
        privileged: true
        volumes:
            - "./apache/apache.conf:/etc/httpd/conf/httpd.conf"
            - "./apache/virtualhost.conf:/etc/httpd/conf.d/virtualhost.conf"
            - "./php/php.ini:/etc/php.ini"
            - "${DEVELOP}/lara-d/:/var/www/html/lara-d"
            - "${DEVELOP}/mysql-to-json:/var/www/html/mysql-to-json"
            - "${DEVELOP}/study-mail-php:/var/www/html/study-mail-php"
            - "${DEVELOP}/study-docker-lamp/basic-authentication:/var/www/html/basic-authentication"
        container_name: "apache-php"
    db:
        image: mysql:5.7
        env_file: ./docker/.docker-env
        container_name: "mysql5.7"
        volumes:
          - ./mysql/custom.cnf:/etc/mysql/conf.d/custom.cnf
          - lamp_db:/var/lib/mysql
    phpmyadmin:
        image: phpmyadmin/phpmyadmin:4.8.5
        links:
            - db
        ports:
            - "8889:80"
        env_file: ./docker/.docker-env
        container_name: "phpmyamin_la"

volumes:
  lamp_db: