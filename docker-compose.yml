version: "3"

services:
    web:
        build:
            context: ./apache-php
        ports:
            - 8888:80
        privileged: true
        volumes:
            - "./apache-php/apache.conf:/etc/httpd/conf/httpd.conf"
            - "./apache-php/virtualhost.conf:/etc/httpd/conf.d/virtualhost.conf"
            - "./lara-d/:/var/www/html/lara-d"
            - "${DEVELOP}/mysql-to-json:/var/www/html/mysql-to-json"
            - "./test-ex:/var/www/html/test-ex"
        container_name: "apache-php"
    db:
        image: mysql:5.7
        env_file: .docker-env
        container_name: "mysql5.7"
        volumes:
          - ./mysql/custom.cnf:/etc/mysql/conf.d/custom.cnf
          - lamp_db:/var/lib/mysql
    phpmyadmin:
        image: phpmyadmin/phpmyadmin:4.8.5
        links:
            - db
        ports:
            - 8889:80
        env_file: .docker-env
        container_name: "phpmyamin_la"

volumes:
  lamp_db: